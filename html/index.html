<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Index</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
</head>
<body style="text-align: center;">
    <p style="margin:0 auto;background-color:#000;color:white;height:5px"></p>
    <div style="text-align: center;">
        <h1>The automatic system for generate your course timetable to iCalander file(ics)<h1>
        <h3>FOR UNNC Y2,Y3,Y4 student only<h3>
        <h2><a style="color: red" href="index-Y1.php">If you are Year 1,(大一点这里！！！) Click HERE</a></h2>
        <h4>ATTENTION: The first download would take a few minutes to generate the course data<h4>
        <h4 style="color: darkslateblue">ATTENTION: Due to our progrem, the calendar would be saved on this serve for less computing; <br>if you are sure that the timetable has changed, please click at the check box below the id input</h4>
        <h4>EXAMPLE: 20124992</h4>
        <br>
    </div>
    <div style="text-align: center;">
        <b>your student id: <b>
        <br>
        <input type="text" name="studentid" id="userid"/>
        <br>
        <input id="ck1" type="checkbox" name="checkIgnore"/>
        <label for="ck1">The timetable has changed since last generate</label> 
        <div class="section">
            <button id="genelink" onclick="test();">Generate link</button>
        </div>
    </div>
    <div id="linkarea">

    </div>
    <div style="text-align: center;">
        <h3>Finally, if something went wrong with the iCalander file generated by this system, let me know.</h3>
        <h3>you can contact me at: sqycz1@nottingham.edu.cn</h3>
        <h3 onclick="showPic()" style="color: darkslateblue">click HERE and Donate US</h3>
        <h3><span style="font-family:arial;">Copyright &copy; 2019 corsaircat.com</span></h2>
    </div>
    <div id="donationPic" style="display: none">
        <img src="img/donation1.jpg"/>
    </div>
</body>
<script type="text/javascript">
        function test(){
            console.log("!!!!");
            var studentId = document.getElementById("userid").value;
            var patt = /^[0-9]{8}$/;
            var patty1 = /^[2][0][2][1][0-9]{4}$/ ;
            var  obj = document.getElementById("ck1");
            if (patt.test(studentId)){
                if (!patty1.test(studentId)){
                    var link = "http://www.corsaircat.com/operationZ/index.php?userid=" + studentId;
                    if (obj.checked){
                        link = link + "&ignoreLocal=owjs91";
                        console.log("link");
                    }
                    var finalink = '<a href="' + link + '">download link</a>';
                    var linkArea = document.getElementById("linkarea");
                    linkArea.innerHTML = finalink;
                }else{
                    alert("Y1 student please go to the red link on page!!!");
                }
            }else{
                alert("it is not a student id, please check");
            }
        }
        function showPic(){
            var obj = document.getElementById("donationPic");
            obj.style.display = "block";
        }
</script>
</html>